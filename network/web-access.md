## 웹브라우저에 URL 입력시 일어나는 작업들

 [손으로 익히며 배우는 네트워크 첫걸음](http://aladin.kr/p/5ocqG) Chapter6의 일부 내용을 인용하고 있음을 알려드립니다.

## 웹사이트를 보는 행위는 무엇을 의미하는가?
www.google.com을 접속하는 행위를 우리는 보통 웹사이트을 열어본다 또는 접속한라고 표현한다. 그렇다면 이 열어본다 또는 접속한다는건 어떤걸 의미하는가?
이는 `웹 서버로부터 HTML 파일이나 이미지 파일 등을 다운로드 하여 표시하는 것`을 의미한다.
이를 다른말로는 `웹 액세스(Web Access)`라고 부르며 말 그대로 HTML파일이나 이미지 파일에 액세스 한다는 뜻으로 쓰입니다.

이런 웹 액세스를 하기 위해 사용하는 Chrome, Safari, Firefox를 Web Browser라고 한다.
그리고 이런 웹 브라우저에 웹사이트의 내용을 기술 하기 위해 사용하는 언어가 `HTML(HyperText Markup Language)`이며, 웹 서버로 부터 파일을 올바르게 전송받기 위해 사용되는 프로토콜이 `HTTP(HyperText Transfer Protocol)`이라고 한다.

## 웹 액세스의 흐름
웹 액세스 전체적인 흐름은 다음의 5가지 단계로 나누어 생각해볼 수 있다.

### 1.  유저가 웹 브라우저에 URL에 입력한다.
- 웹브라우저 주소창에 URL을 입력하거나 링크를 클릭함으로 웹 액세스가 시작된다.

### 2. URL로 지정한 웹 서버에게 HTTP 요청을 송신한다.
- 대부분의 URL에는 웹 서버의 IP 주소가 아니라 호스트명이 지정되어있습니다. 따라서 자동으로 DNS 서버에 IP주소를 질의하게 됩니다. DNS로 웹서버의 IP 주소를 알아낸 뒤에는 [TCP연결](#tcp)이 맺어지며, HTTP 요청이 웹 서버로 송신됩니다.

### 3. 웹 서버가 요청을 해석한다.
- 웹 브라우저로부터 HTTP 요청을 수힌한 웹 서버는 그 요청 내용을 해석합니다.

### 4. 웹 서버가 요청받은 파일을 웹 브라우저에 돌려보낸다.
- 웹 서버는 웹 브라우저가 요구한 파일을 HTTP 응답으로 돌려보냅니다. 보통 이 파일은 HTML로 쓰여진 HTML 파일에 해당합니다. 만약 해당하는 파일이 없거나 에러가 발생했을 경우에는 웹 브라우저로 에러 내용을 돌려보냅니다.

### 5. 웹 브라우저가 수신한 데이터를 해석해서 표시한다.
- 웹 서버로부터 HTML 파일을 수신한 웹 브라우저는 HTML을 해석해서 그 내용을 웹 브라우저상에 표시합니다.


## Reference
#### TCP
- 적절한 데이터 애플리케이션 데이터를 전달하기 위해서 이용되는 프로토콜이 TCP(Transmission Control Protocol)입니다.
- TCP에서는 애플리케이션 간에 신뢰성 있는 데이터 전송을 수행하기 위하여 `3 웨이 핸드 쉐이크(Three-way handshake)`라는 기법을 사용하여 TCP 연결을 성립시킵니다.

#### 3 웨이 핸드 쉐이크(Three-way handshake)이란?
- 말 그대로 데이터 전송을 수행하는 애플리케이션끼리 `인사를 3번` 함으로써 연결을 성립시키는 기법을 말한다.

```
호스트 A, 호스트 B가 있을때

해설
1. 호스트 A가 연결해도 될까요?라고 물어보는 연결 요구(SYN flag)가 호스트B의 애플리케이션에 도착한다.
2. 호스트 B는 이쪽에서도 연결하겠습니다라는 응답으로 (SYN/ACK) 응답을 돌려보냅니다.
3. 호스트 A는 이쪽도 OK입니다라는 응답으로 (ACK)을 돌려보냅니다.


실제로 일어나는일
1. 호스트 A -----[ SYN ]---------> 호스트 B
2. 호스트 B -----[ SYN/ACK ]----> 호스트 A
3. 호스트 A -----[ ACK ]---------> 호스트 B
```

```
## SYN
- 클라이언트가 무작위로 시퀸스 번호 x를 고르고 SYN 패킷을 보낸다. 그 밖의 다른 TCP 플래그나 옵션 값들을 포함할 수 있다.

## SYN ACK
- 서버가 시퀸스 번호 x를 1만큼 증가시키고, 무작위로 시퀸스 번호 y를 고른다.
- 서버 또한 플래그와 옵션 값들을 추가한 후 응답을 보낸다.

## ACK
- 클라이언트가 x와 y를 모두 1만큼 증가시킨 후 마지막 ACK 패킷을 보냄으로써 핸드셰이크 과정을 종료한다.
```
